(this["webpackJsonpsubstrate-front-end-template"]=this["webpackJsonpsubstrate-front-end-template"]||[]).push([[0],{469:function(e){e.exports=JSON.parse('{"APP_NAME":"dappCon","DEVELOPMENT_KEYRING":true,"RPC":{}}')},518:function(e){e.exports=JSON.parse('{"PROVIDER_SOCKET":"wss://shiden.api.onfinality.io/public-ws"}')},519:function(e){e.exports=JSON.parse('{"SmartContract":{"_enum":{"Evm":"H160","Wasm":"AccountId"}},"EraRewardAndStake":{"rewards":"Balance","staked":"Balance"},"EraIndex":"u32","StakingLedger":{"total":"Balance","active":"Balance"},"EraStakingPoints":{"total":"Balance","stakers":"BTreeMap<AccountId, Balance>","former_staked_era":"u32","claimed_rewards":"Balance"}}')},521:function(e,t){},529:function(e,t){},554:function(e,t){},556:function(e,t){},566:function(e,t){},568:function(e,t){},598:function(e,t){},600:function(e,t){},607:function(e,t){},608:function(e,t){},625:function(e,t){},647:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n.n(a),r=n(139),s=n.n(r),o=n(1),i=n(684),l=n(675),u=n(692),j=n(687),b=n(676),p=n(677),O=n(673),d=n(479),f=n(694),x=(n(503),n(17)),h=n.n(x),S=n(29),y=n(25),v=n(470),m=n(195),C=n.n(m),g=n(688),k=n(678),E=n(226),R=n(309),N=n(469),w=n(518),T=n(519),P=["REACT_APP_PROVIDER_SOCKET","REACT_APP_DEVELOPMENT_KEYRING"].reduce((function(e,t){return void 0!==Object({NODE_ENV:"production",PUBLIC_URL:"/dappcon",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})[t]&&(e[t.slice(10)]=Object({NODE_ENV:"production",PUBLIC_URL:"/dappcon",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})[t]),e}),{}),D=Object(y.a)(Object(y.a)(Object(y.a)(Object(y.a)({},N),w),P),{},{types:T}),_=n(4),I=C.a.parse(window.location.search).rpc||D.PROVIDER_SOCKET;console.log("Connected socket: ".concat(I));var A={socket:I,jsonrpc:Object(y.a)(Object(y.a)({},v.a),D.RPC),types:D.types,keyring:null,keyringState:null,api:null,apiError:null,apiState:null},q=function(e,t){switch(t.type){case"CONNECT_INIT":return Object(y.a)(Object(y.a)({},e),{},{apiState:"CONNECT_INIT"});case"CONNECT":return Object(y.a)(Object(y.a)({},e),{},{api:t.payload,apiState:"CONNECTING"});case"CONNECT_SUCCESS":return Object(y.a)(Object(y.a)({},e),{},{apiState:"READY"});case"CONNECT_ERROR":return Object(y.a)(Object(y.a)({},e),{},{apiState:"ERROR",apiError:t.payload});case"LOAD_KEYRING":return Object(y.a)(Object(y.a)({},e),{},{keyringState:"LOADING"});case"SET_KEYRING":return Object(y.a)(Object(y.a)({},e),{},{keyring:t.payload,keyringState:"READY"});case"KEYRING_ERROR":return Object(y.a)(Object(y.a)({},e),{},{keyring:null,keyringState:"ERROR"});default:throw new Error("Unknown type: ".concat(t.type))}},U=!1,Y=c.a.createContext(),H=function(e){var t=Object(y.a)({},A);["socket","types"].forEach((function(n){t[n]="undefined"===typeof e[n]?t[n]:e[n]}));var n=Object(a.useReducer)(q,t),c=Object(o.a)(n,2),r=c[0],s=c[1];return function(e,t){var n=e.apiState,a=e.socket,c=e.jsonrpc,r=e.types;if(!n){t({type:"CONNECT_INIT"});var s=new g.a(a),o=new k.a({provider:s,types:r,rpc:c});o.on("connected",(function(){t({type:"CONNECT",payload:o}),o.isReady.then((function(e){return t({type:"CONNECT_SUCCESS"})}))})),o.on("ready",(function(){return t({type:"CONNECT_SUCCESS"})})),o.on("error",(function(e){return t({type:"CONNECT_ERROR",payload:e})}))}}(r,s),function(e,t){var n=function(){var e=Object(S.a)(h.a.mark((function e(){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"LOAD_KEYRING"}),e.prev=1,e.next=4,Object(E.b)(D.APP_NAME);case 4:return e.next=6,Object(E.a)();case 6:n=(n=e.sent).map((function(e){var t=e.address,n=e.meta;return{address:t,meta:Object(y.a)(Object(y.a)({},n),{},{name:"".concat(n.name," (").concat(n.source,")")})}})),R.a.loadAll({isDevelopment:D.DEVELOPMENT_KEYRING},n),t({type:"SET_KEYRING",payload:R.a}),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),console.error(e.t0),t({type:"KEYRING_ERROR"});case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}();if(!e.keyringState){if(U)return t({type:"SET_KEYRING",payload:R.a});U=!0,n()}}(r,s),Object(_.jsx)(Y.Provider,{value:r,children:e.children})},L=function(){return Object(y.a)({},Object(a.useContext)(Y))},F={paramConversion:{num:["Compact<Balance>","BalanceOf","u8","u16","u32","u64","u128","i8","i16","i32","i64","i128"]}},K=n(15),G=n(648);function M(e){var t=e.accountPair,n=void 0===t?null:t,c=e.label,r=e.setStatus,s=e.color,i=void 0===s?"blue":s,l=e.style,u=void 0===l?null:l,j=e.type,b=void 0===j?"QUERY":j,p=e.attrs,O=void 0===p?null:p,d=e.disabled,f=void 0!==d&&d,x=L().api,v=Object(a.useState)(null),m=Object(o.a)(v,2),C=m[0],g=m[1],k=Object(a.useState)(null),R=Object(o.a)(k,2),N=R[0],w=R[1],T=O.palletRpc,P=O.callable,D=O.inputParams,I=O.paramFields,A=function(){return"SUDO-TX"===b},q=function(){return"UNCHECKED-SUDO-TX"===b};Object(a.useEffect)((function(){Object(S.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x&&x.query.sudo){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,x.query.sudo.key();case 4:(t=e.sent).isEmpty?w(null):w(t.toString());case 6:case"end":return e.stop()}}),e)})))()}),[x]);var U,Y=function(){var e=Object(S.a)(h.a.mark((function e(){var t,a,c,r,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.address,a=n.meta,c=a.source,!a.isInjected){e.next=9;break}return e.next=4,Object(E.c)(c);case 4:s=e.sent,r=t,x.setSigner(s.signer),e.next=10;break;case 9:r=n;case 10:return e.abrupt("return",r);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(e){var t=e.status;return t.isFinalized?r("\ud83d\ude09 Finalized. Block hash: ".concat(t.asFinalized.toString())):r("Current transaction status: ".concat(t.type))},M=function(e){return r("\ud83d\ude1e Transaction Failed: ".concat(e.toString()))},B=function(){var e=Object(S.a)(h.a.mark((function e(){var t,n,a,c,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y();case 2:n=e.sent,a=ee(I,D),c=a?x.tx.sudo.sudo((t=x.tx[T])[P].apply(t,Object(K.a)(a))):x.tx.sudo.sudo(x.tx[T][P]()),r=c.signAndSend(n,H).catch(M),g((function(){return r}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=Object(S.a)(h.a.mark((function e(){var t,n,a,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y();case 2:n=e.sent,a=x.tx.sudo.sudoUncheckedWeight((t=x.tx[T])[P].apply(t,Object(K.a)(D)),0),c=a.signAndSend(n,H).catch(M),g((function(){return c}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=Object(S.a)(h.a.mark((function e(){var t,n,a,c,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y();case 2:return n=e.sent,a=ee(I,D),c=a?(t=x.tx[T])[P].apply(t,Object(K.a)(a)):x.tx[T][P](),e.next=7,c.signAndSend(n,H).catch(M);case 7:r=e.sent,g((function(){return r}));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=Object(S.a)(h.a.mark((function e(){var t,n,a,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ee(I,D),a=n?(t=x.tx[T])[P].apply(t,Object(K.a)(n)):x.tx[T][P](),e.next=4,a.send(H).catch(M);case 4:c=e.sent,g((function(){return c}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(e){return e.isNone?r("None"):r(e.toString())},z=function(){var e=Object(S.a)(h.a.mark((function e(){var t,n,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ee(I,D),e.next=3,(t=x.query[T])[P].apply(t,Object(K.a)(n).concat([W]));case 3:a=e.sent,g((function(){return a}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=function(){var e=Object(S.a)(h.a.mark((function e(){var t,n,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ee(I,D,{emptyAsNull:!1}),e.next=3,(t=x.rpc[T])[P].apply(t,Object(K.a)(n).concat([W]));case 3:a=e.sent,g((function(){return a}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=x.consts[T][P];e.isNone?r("None"):r(e.toString())},$=function(){var e=Object(S.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:C&&(C(),g(null)),r("Sending..."),A()&&B()||q()&&X()||"SIGNED-TX"===b&&Q()||"UNSIGNED-TX"===b&&V()||"QUERY"===b&&z()||"RPC"===b&&J()||"CONSTANT"===b&&Z();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ee=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{emptyAsNull:!0},a=t.map((function(e){return"object"===typeof e&&null!==e&&"string"===typeof e.value?e.value.trim():"string"===typeof e?e.trim():e})),c=e.map((function(e,t){return Object(y.a)(Object(y.a)({},e),{},{value:a[t]||null})}));return c.reduce((function(e,t){var a=t.type,c=void 0===a?"string":a,r=t.value;if(null==r||""===r)return n.emptyAsNull?[].concat(Object(K.a)(e),[null]):e;var s=r;return c.indexOf("Vec<")>=0?(s=(s=s.split(",").map((function(e){return e.trim()}))).map((function(e){return te(c)?e.indexOf(".")>=0?Number.parseFloat(e):Number.parseInt(e):e})),[].concat(Object(K.a)(e),[s])):(te(c)&&(s=s.indexOf(".")>=0?Number.parseFloat(s):Number.parseInt(s)),[].concat(Object(K.a)(e),[s]))}),[])},te=function(e){return F.paramConversion.num.some((function(t){return e.indexOf(t)>=0}))};return Object(_.jsx)(G.a,{basic:!0,color:i,style:u,type:"submit",onClick:$,disabled:f||!T||!P||!(0===I.length||I.every((function(e,t){var n=D[t];if(e.optional)return!0;if(null==n)return!1;var a="object"===typeof n?n.value:n;return null!==a&&""!==a})))||(A()||q())&&(U=n,!(N&&U&&U.address===N)),children:c})}function B(e){return Object(_.jsxs)(G.a.Group,{children:[Object(_.jsx)(M,Object(y.a)({label:"Unsigned",type:"UNSIGNED-TX",color:"grey"},e)),Object(_.jsx)(G.a.Or,{}),Object(_.jsx)(M,Object(y.a)({label:"Signed",type:"SIGNED-TX",color:"blue"},e)),Object(_.jsx)(G.a.Or,{}),Object(_.jsx)(M,Object(y.a)({label:"SUDO",type:"SUDO-TX",color:"red"},e))]})}function X(e){var t=L(),a=t.api,c=t.apiState,r=t.keyring,s=t.keyringState;return"READY"===c&&(window.api=a),"READY"===s&&(window.keyring=r),window.util=n(6),window.utilCrypto=n(46),null}var Q=n(681),V=n(679),W=n(682),z=n(693),J=n(150);n(680),n(643);function Z(e){var t=L().api,n=Object(a.useState)([]),c=Object(o.a)(n,2),r=c[0],s=c[1],i=Object(a.useState)(0),l=Object(o.a)(i,2),j=l[0],b=l[1],p=Object(a.useState)(0),O=Object(o.a)(p,2),d=O[0],f=O[1],x=Object(a.useState)(0),h=Object(o.a)(x,2),S=h[0],y=h[1],v=Object(a.useState)(0),m=Object(o.a)(v,2),C=m[0],g=m[1],k=Object(a.useState)(0),E=Object(o.a)(k,2),R=E[0],N=E[1],w=Object(a.useState)(0),T=Object(o.a)(w,2),P=T[0],D=T[1],I=Object(a.useState)(0),A=Object(o.a)(I,2),q=A[0],U=A[1],Y=Object(a.useState)(0),H=Object(o.a)(Y,2),F=H[0],K=H[1],G=Object(a.useState)(0),M=Object(o.a)(G,2),B=M[0],X=M[1],W=Object(a.useState)([]),z=Object(o.a)(W,2),J=(z[0],z[1],function(e){return{Evm:e}});return Object(a.useEffect)((function(){t.query.dappsStaking.registeredDapps.keys().then((function(e){console.log("registeredDapps result",e);var t=e.map((function(e){return"0x"+e.toString().slice(-40)}));console.log(t);var n=t.map((function(e){return{key:e,value:e,text:e}}));console.log("updateCallables callables",n),s(n)})).catch(console.error)}),[t.query.dappsStaking]),Object(a.useEffect)((function(e,n){console.log("doQuery selectedContract is",j),function(){var e;t.query.dappsStaking.contractLastStaked(J(j),(function(t){e=t.isNone?"never":t.unwrap().toString(),console.log("queryLastStaked res",e),y(e)})).catch(console.error)}(),function(){var e;t.query.dappsStaking.contractLastClaimed(J(j),(function(t){e=t.isNone?"never":t.unwrap().toHuman(),console.log("queryLastClaimed res",e),f(e)})).catch(console.error)}()}),[j]),Object(a.useEffect)((function(){!function(){var e;console.log("queryDeveloper selectedContract is",j),t.query.dappsStaking.registeredDapps(J(j),(function(t){e=t.isNone?"none":t.unwrap().toHuman(),console.log("queryDeveloper res",e),N(e)})).catch(console.error)}(),console.log("queryContractEraStake selectedContract is",j,"last staked",S),t.query.dappsStaking.contractEraStake(J(j),S,(function(e){e.isNone?(console.log("queryContractEraStake result.isNone"),D(0),U(0),K(0)):(console.log("queryContractEraStake res",e.unwrap().toHuman()),D(e.unwrap().total.toHuman()),console.log("queryContractEraStake total",e.unwrap().total.toHuman()),U(e.unwrap().claimed_rewards.toHuman()),console.log("queryContractEraStake total",e.unwrap().claimed_rewards.toHuman()),X(e.unwrap().former_staked_era.toString()),K(e.unwrap().stakers.size),console.log("queryContractEraStake total",e.unwrap().stakers.size))})).catch(console.error)}),[S]),Object(_.jsxs)(u.a.Column,{width:8,children:[Object(_.jsx)("h1",{children:"Contract Explorer"}),Object(_.jsxs)(Q.a,{children:[Object(_.jsx)(Q.a.Field,{children:Object(_.jsx)(V.a,{placeholder:"Contract",fluid:!0,label:"Contract",onChange:function(e,t){N(0),y(0),f(0),K("?"),U("?"),console.log("onContractChange value",t.value),b(t.value),g(t.value)},search:!0,selection:!0,value:C,options:r})}),Object(_.jsx)($,{developer:R,numStakers:F,lastClaimed:d,lastStaked:S,totalStaked:P,claimedRewards:q,contract:j,previousStaked:B})]})]})}function $(e){return Object(_.jsxs)("div",{style:{overflowWrap:"break-word"},children:[Object(_.jsx)("img",{alt:"robots",src:"https://robohash.org/".concat(e.contract)}),Object(_.jsxs)(W.a,{children:[Object(_.jsxs)(W.a.Header,{children:[Object(_.jsxs)(W.a.Row,{children:[Object(_.jsx)(W.a.HeaderCell,{children:"Contract Address"}),Object(_.jsx)(W.a.HeaderCell,{children:e.contract})]}),Object(_.jsxs)(W.a.Row,{children:[Object(_.jsx)(W.a.HeaderCell,{children:"Developer's account:"}),Object(_.jsx)(W.a.HeaderCell,{children:e.developer})]})]}),Object(_.jsxs)(W.a.Body,{children:[Object(_.jsxs)(W.a.Row,{children:[Object(_.jsx)(W.a.Cell,{children:Object(_.jsx)(z.a,{as:"h2",children:Object(_.jsxs)(z.a.Content,{children:[e.lastStaked,Object(_.jsx)(z.a.Subheader,{children:"Contract Last Staked"})]})})}),Object(_.jsx)(W.a.Cell,{children:Object(_.jsx)(z.a,{as:"h2",children:Object(_.jsxs)(z.a.Content,{children:[e.lastClaimed,Object(_.jsx)(z.a.Subheader,{children:"Contract Last Claimed"})]})})}),Object(_.jsx)(W.a.Cell,{children:Object(_.jsx)(z.a,{as:"h2",children:Object(_.jsxs)(z.a.Content,{children:[Object(_.jsx)(J.a,{name:"user"}),e.numStakers,Object(_.jsx)(z.a.Subheader,{children:"Number of Stakers"})]})})})]}),Object(_.jsxs)(W.a.Row,{children:[Object(_.jsx)(W.a.Cell,{children:Object(_.jsx)(z.a,{as:"h2",children:Object(_.jsxs)(z.a.Content,{children:[e.totalStaked,Object(_.jsx)(z.a.Subheader,{children:"Total Staked"})]})})}),Object(_.jsx)(W.a.Cell,{children:Object(_.jsx)(z.a,{as:"h2",children:Object(_.jsxs)(z.a.Content,{children:[e.claimedRewards,Object(_.jsx)(z.a.Subheader,{children:"Claimed Rewards"})]})})}),Object(_.jsx)(W.a.Cell,{children:Object(_.jsx)(z.a,{as:"h2",children:Object(_.jsxs)(z.a.Content,{children:[e.previousStaked,Object(_.jsx)(z.a.Subheader,{children:"Previously staked era"})]})})})]})]})]})]})}function ee(e){return L().api?Object(_.jsx)(Z,Object(y.a)({},e)):null}var te=n(683),ne=n(690),ae=1e18;function ce(e){var t=L().api,n=Object(a.useState)(0),c=Object(o.a)(n,2),r=c[0],s=c[1],i=Object(a.useState)(0),l=Object(o.a)(i,2),j=l[0],b=l[1],p=Object(a.useState)(0),O=Object(o.a)(p,2),d=O[0],f=O[1];return Object(a.useEffect)((function(){var e;return t.query.dappsStaking.currentEra((function(e){s(e.toNumber())})),t.query.dappsStaking.eraRewardsAndStakes(r,(function(e){if(e.isNone)b("<None>");else{var t=parseInt(e.unwrap().staked.valueOf()/ae);b(t)}})).catch(console.error),t.query.dappsStaking.blockRewardAccumulator((function(e){if(e.isNone)f("<None>");else{var t=parseInt(e/ae);f(t)}})).catch(console.error),function(){return e}}),[t.query.dappsStaking.blockRewardAccumulator,r]),Object(_.jsx)(u.a.Column,{children:Object(_.jsxs)(te.a,{children:[Object(_.jsx)(te.a.Content,{textAlign:"center",children:Object(_.jsx)(ne.a,{label:"TVL in dApps",value:j})}),Object(_.jsxs)(te.a.Content,{extra:!0,children:["upcoming rewards",Object(_.jsx)(J.a,{name:"hand point right outline"}),d]})]})})}function re(e){return L().api.query.dappsStaking?Object(_.jsx)(ce,Object(y.a)({},e)):null}var se=n(685);function oe(e){var t=L().api,n=Object(a.useState)(0),c=Object(o.a)(n,2),r=c[0],s=c[1],i=Object(a.useState)(0),l=Object(o.a)(i,2),j=l[0],b=l[1],p=Object(a.useState)(0),O=Object(o.a)(p,2),d=O[0],f=O[1],x=t.consts.dappsStaking.blockPerEra.toNumber(),h=t.query.dappsStaking.currentEra,S=t.derive.chain.bestNumber;return Object(a.useEffect)((function(){var e=null;return S((function(e){f(e%x/x*100),b(x-e%x)})).then((function(t){e=t})).catch(console.error),t.query.dappsStaking.currentEra((function(e){s(e.toNumber())})).catch(console.error),function(){return e&&e()}}),[h,S]),Object(_.jsx)(u.a.Column,{children:Object(_.jsxs)(te.a,{color:"purple",children:[Object(_.jsx)(te.a.Content,{textAlign:"center",children:Object(_.jsx)(ne.a,{label:"Current Era",value:r})}),Object(_.jsxs)(te.a.Content,{extra:!0,children:[Object(_.jsx)(se.a,{percent:d,indicating:!0,success:!0}),"Blocks until new era :",Object(_.jsx)(J.a,{name:"time"})," ",j]})]})})}function ie(e){return L().api.query.dappsStaking.currentEra?Object(_.jsx)(oe,Object(y.a)({},e)):null}var le=n(22),ue=n(674),je=n(224),be=function(e){return e.type.toString().startsWith("Option<")};function pe(e){var t=L(),n=t.api,c=t.jsonrpc,r=e.accountPair,s=Object(a.useState)(null),i=Object(o.a)(s,2),l=i[0],j=i[1],b=Object(a.useState)("QUERY"),p=Object(o.a)(b,2),O=p[0],d=p[1],f=Object(a.useState)([{key:"dappsStaking",value:"dappsStaking",text:"dappsStaking"}]),x=Object(o.a)(f,2),h=x[0],S=(x[1],Object(a.useState)([])),v=Object(o.a)(S,2),m=v[0],C=v[1],g=Object(a.useState)([]),k=Object(o.a)(g,2),E=k[0],R=k[1],N={palletRpc:"",callable:"",inputParams:[]},w=Object(a.useState)(N),T=Object(o.a)(w,2),P=T[0],D=T[1],I=P.palletRpc,A=P.callable,q=P.inputParams;Object(a.useEffect)((function(){if(n&&""!==I){var e=Object.keys(function(e,t){return"QUERY"===t?e.query:"EXTRINSIC"===t?e.tx:"RPC"===t?e.rpc:e.consts}(n,O)[I]).sort().map((function(e){return{key:e,value:e,text:e}}));console.log("updateCallables",e),C(e)}}),[n,O,I]),Object(a.useEffect)((function(){if(n&&""!==I&&""!==A){var e=[];if("QUERY"===O){console.log("interxType QUERY");var t=n.query[I][A].meta.type;console.log("metaType = ",t),t.isPlain||(t.isMap?(console.log("metaType isMap"),e=[{name:t.asMap.key.toString(),type:t.asMap.key.toString(),optional:!1}],console.log("paramFields = ",e)):t.isDoubleMap&&(console.log("metaType isDoubleMap"),e=[{name:t.asDoubleMap.key1.toString(),type:t.asDoubleMap.key1.toString(),optional:!1},{name:t.asDoubleMap.key2.toString(),type:t.asDoubleMap.key2.toString(),optional:!1}],console.log("paramFields = ",e)))}else if("EXTRINSIC"===O){console.log("interxType EXTRINSIC");var a=n.tx[I][A].meta.args;a&&a.length>0&&(e=a.map((function(e){return{name:e.name.toString(),type:e.type.toString(),optional:be(e)}})))}else if("RPC"===O){var r=[];c[I]&&c[I][A]&&(r=c[I][A].params),r.length>0&&(e=r.map((function(e){return{name:e.name,type:e.type,optional:e.isOptional||!1}})))}else"CONSTANT"===O&&(e=[]);R(e)}else R([])}),[n,O,I,A,c]);var U=function(e,t){D((function(e){var n,a=t.state,c=t.value;if("object"===typeof a){var r=a.ind,s=a.paramField.type,o=Object(K.a)(e.inputParams);o[r]={type:s,value:c},n=Object(y.a)(Object(y.a)({},e),{},{inputParams:o})}else if("palletRpc"===a){var i;n=Object(y.a)(Object(y.a)({},e),{},(i={},Object(le.a)(i,a,c),Object(le.a)(i,"callable",""),Object(le.a)(i,"inputParams",[]),i))}else if("callable"===a){var l;n=Object(y.a)(Object(y.a)({},e),{},(l={},Object(le.a)(l,a,c),Object(le.a)(l,"inputParams",[]),l))}return n}))},Y=function(e,t){d(t.value),D(N)},H=function(e){return"RPC"===e?"Optional Parameter":"Leaving this field as blank will submit a NONE value"};return Object(_.jsxs)(u.a.Column,{width:8,children:[Object(_.jsx)("h1",{children:"dApps-Staking Pallet Interactor"}),Object(_.jsxs)(Q.a,{children:[Object(_.jsxs)(Q.a.Group,{style:{overflowX:"auto"},inline:!0,children:[Object(_.jsx)("label",{children:"Interaction Type"}),Object(_.jsx)(Q.a.Radio,{label:"Extrinsic",name:"interxType",value:"EXTRINSIC",checked:"EXTRINSIC"===O,onChange:Y}),Object(_.jsx)(Q.a.Radio,{label:"Query",name:"interxType",value:"QUERY",checked:"QUERY"===O,onChange:Y}),Object(_.jsx)(Q.a.Radio,{label:"RPC",name:"interxType",value:"RPC",checked:"RPC"===O,onChange:Y}),Object(_.jsx)(Q.a.Radio,{label:"Constant",name:"interxType",value:"CONSTANT",checked:"CONSTANT"===O,onChange:Y})]}),Object(_.jsx)(Q.a.Field,{children:Object(_.jsx)(V.a,{placeholder:"Pallets / RPC",fluid:!0,label:"Pallet / RPC",onChange:U,search:!0,selection:!0,state:"palletRpc",value:I,options:h})}),Object(_.jsx)(Q.a.Field,{children:Object(_.jsx)(V.a,{placeholder:"Callables",fluid:!0,label:"Callable",onChange:U,search:!0,selection:!0,state:"callable",value:A,options:m})}),E.map((function(e,t){return Object(_.jsxs)(Q.a.Field,{children:[Object(_.jsx)(ue.a,{placeholder:e.type,fluid:!0,type:"text",label:e.name,state:{ind:t,paramField:e},value:q[t]?q[t].value:"",onChange:U}),e.optional?Object(_.jsx)(je.a,{basic:!0,pointing:!0,color:"teal",content:H(O)}):null]},"".concat(e.name,"-").concat(e.type))})),Object(_.jsx)(Q.a.Field,{style:{textAlign:"center"},children:Object(_.jsx)(Oe,{accountPair:r,setStatus:j,attrs:{interxType:O,palletRpc:I,callable:A,inputParams:q,paramFields:E}})}),Object(_.jsx)("div",{style:{overflowWrap:"break-word"},children:l})]})]})}function Oe(e){var t=e.attrs.interxType;return"QUERY"===t?(console.log("TxButton InteractorSubmit props = ",e),Object(_.jsx)(M,Object(y.a)({label:"Query",type:"QUERY",color:"blue"},e))):"EXTRINSIC"===t?Object(_.jsx)(B,Object(y.a)({},e)):"RPC"===t||"CONSTANT"===t?Object(_.jsx)(M,Object(y.a)({label:"Submit",type:t,color:"blue"},e)):void 0}function de(e){return L().api.tx?Object(_.jsx)(pe,Object(y.a)({},e)):null}function fe(e){var t=L().api,n=Object(a.useState)(0),c=Object(o.a)(n,2),r=c[0],s=c[1],i=Object(a.useState)("unknown"),l=Object(o.a)(i,2),j=l[0],b=l[1];return Object(a.useEffect)((function(){var e;return t.query.dappsStaking.preApprovalIsEnabled((function(e){b(e.toString())})),e=t.query.dappsStaking.registeredDapps.keys().then((function(e){s(e.length)})).catch(console.error),function(){return e}}),[t.query.dappsStaking,t.query.dappsStaking.registeredDapps]),Object(_.jsx)(u.a.Column,{children:Object(_.jsxs)(te.a,{children:[Object(_.jsx)(te.a.Content,{textAlign:"center",children:Object(_.jsx)(ne.a,{label:"dApps Count",value:r})}),Object(_.jsxs)(te.a.Content,{extra:!0,children:["preappoval enabled: ",j]})]})})}function xe(e){var t=L().api;return t.query.dappsStaking&&t.query.dappsStaking.registeredDapps?Object(_.jsx)(fe,Object(y.a)({},e)):null}function he(e){var t=L(),n=t.api,c=t.socket,r=Object(a.useState)({}),s=Object(o.a)(r,2),i=s[0],l=s[1];return Object(a.useEffect)((function(){var e=function(){var e=Object(S.a)(h.a.mark((function e(){var t,a,c,r,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([n.rpc.system.chain(),n.rpc.system.name(),n.rpc.system.version()]);case 3:t=e.sent,a=Object(o.a)(t,3),c=a[0],r=a[1],s=a[2],l({chain:c,nodeName:r,nodeVersion:s}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();e()}),[n.rpc.system]),Object(_.jsx)(u.a.Column,{children:Object(_.jsxs)(te.a,{children:[Object(_.jsxs)(te.a.Content,{children:[Object(_.jsx)(te.a.Header,{children:i.nodeName}),Object(_.jsx)(te.a.Meta,{children:Object(_.jsx)("span",{children:i.chain})}),Object(_.jsx)(te.a.Description,{children:c})]}),Object(_.jsxs)(te.a.Content,{extra:!0,children:[Object(_.jsx)(J.a,{name:"setting"}),"v",i.nodeVersion]})]})})}function Se(e){var t=L().api;return t.rpc&&t.rpc.system&&t.rpc.system.chain&&t.rpc.system.name&&t.rpc.system.version?Object(_.jsx)(he,Object(y.a)({},e)):null}var ye=n(686);function ve(e){var t=L().api,n=Object(a.useState)(0),c=Object(o.a)(n,2),r=c[0],s=c[1],i=Object(a.useState)(0),l=Object(o.a)(i,2),u=l[0],j=l[1],b=Object(a.useState)(0),p=Object(o.a)(b,2),O=p[0],d=p[1],f=Object(a.useState)(0),x=Object(o.a)(f,2),h=x[0],S=x[1];return Object(a.useEffect)((function(){var e=t.consts.dappsStaking.blockPerEra.toNumber();s(e);var n=t.consts.dappsStaking.maxNumberOfStakersPerContract.toNumber();j(n);var a=t.consts.dappsStaking.historyDepth.toNumber();d(a);var c=t.consts.dappsStaking.minimumStakingAmount.toHuman();return S(c),function(){}}),[t.consts]),Object(_.jsxs)(ye.a.Group,{children:[Object(_.jsxs)(ye.a,{active:!0,children:[Object(_.jsx)(J.a,{name:"truck"}),Object(_.jsxs)(ye.a.Content,{children:[Object(_.jsx)(ye.a.Title,{children:r}),Object(_.jsx)(ye.a.Description,{children:"Blocks per Era"})]})]}),Object(_.jsxs)(ye.a,{active:!0,children:[Object(_.jsx)(J.a,{name:"user"}),Object(_.jsxs)(ye.a.Content,{children:[Object(_.jsx)(ye.a.Title,{children:u}),Object(_.jsx)(ye.a.Description,{children:"Max Stakers per contract "})]})]}),Object(_.jsxs)(ye.a,{active:!0,children:[Object(_.jsx)(J.a,{name:"exclamation triangle"}),Object(_.jsxs)(ye.a.Content,{children:[Object(_.jsx)(ye.a.Title,{children:O}),Object(_.jsx)(ye.a.Description,{children:"Rewards expire (in eras) "})]})]}),Object(_.jsxs)(ye.a,{active:!0,children:[Object(_.jsx)(J.a,{name:"money bill alternate"}),Object(_.jsxs)(ye.a.Content,{children:[Object(_.jsx)(ye.a.Title,{children:h}),Object(_.jsx)(ye.a.Description,{children:"Minimum staking amount "})]})]})]})}function me(e){return L().api.consts?Object(_.jsx)(ve,Object(y.a)({},e)):null}function Ce(e){var t=Object(a.useState)(""),n=Object(o.a)(t,2),c=n[0],r=n[1];Object(a.useEffect)((function(){var e=C.a.parseUrl(window.location.search);r(e.query.rpc||D.PROVIDER_SOCKET)}),[]);return Object(_.jsx)(O.a,{children:Object(_.jsx)(V.a,{search:!0,selection:!0,clearable:!0,placeholder:"Select the Network",options:[{key:"Shiden",text:"Shiden (mainnet)",value:"wss://shiden.api.onfinality.io/public-ws"},{key:"Shibuya",text:"Shibuya (testnet)",value:"wss://rpc.shibuya.astar.network"},{key:"Local",text:"Local",value:"ws://127.0.0.1:9944"}],onChange:function(e,t){!function(e){r(e);var t=C.a.parseUrl(window.location.search);t.query.rpc=e,window.location=C.a.stringifyUrl(t)}(t.value)},value:c})})}function ge(e){return Object(_.jsx)(Ce,Object(y.a)({},e))}function ke(){var e,t=Object(a.useState)(null),n=Object(o.a)(t,1)[0],c=L(),r=c.apiState,s=c.keyring,x=c.keyringState,h=c.apiError,S=n&&"READY"===x&&s.getPair(n),y=function(e){return Object(_.jsx)(i.a,{active:!0,children:Object(_.jsx)(l.a,{size:"small",children:e})})};if("ERROR"===r)return e=h,Object(_.jsxs)(u.a,{centered:!0,columns:2,padded:!0,children:[Object(_.jsx)(u.a.Column,{children:Object(_.jsx)(j.a,{negative:!0,compact:!0,floating:!0,header:"Error Connecting to Substrate",content:"".concat(JSON.stringify(e,null,4))})}),Object(_.jsx)(u.a.Column,{children:Object(_.jsx)(ge,{})})]});if("READY"!==r)return y("Connecting to Substrate");if("READY"!==x)return y("Loading accounts (please review any extension's authorization)");var v=Object(a.createRef)();return Object(_.jsxs)("div",{ref:v,children:[Object(_.jsx)(b.a,{context:v,children:Object(_.jsx)(u.a,{centered:!0,columns:2})}),Object(_.jsx)(p.a,{}),Object(_.jsxs)(O.a,{children:[Object(_.jsx)("style",{children:"\n            html, body {\n              background-color: #252839 !important;\n            }\n            p {\n              align-content: center;\n              background-color: #495285;\n              color: #fff;\n              display: flex;\n              flex-direction: column;\n              justify-content: center;\n              min-height: 6em;\n            }\n            p > span {\n              opacity: 0.4;\n              text-align: center;\n            }\n          }\n          "}),Object(_.jsxs)(u.a,{stackable:!0,columns:"equal",children:[Object(_.jsxs)(u.a.Row,{children:[Object(_.jsx)(d.a,{src:"".concat("/dappcon","/assets/astar_dashboard.png"),size:"huge"}),Object(_.jsx)(ge,{})]}),Object(_.jsxs)(u.a.Row,{stretched:!0,children:[Object(_.jsx)(ie,{}),Object(_.jsx)(xe,{}),Object(_.jsx)(re,{}),Object(_.jsx)(Se,{})]}),Object(_.jsx)(p.a,{}),Object(_.jsx)(u.a.Row,{children:Object(_.jsx)(me,{})}),Object(_.jsx)(p.a,{}),Object(_.jsx)(u.a.Row,{children:Object(_.jsx)(f.a,{raised:!0,children:Object(_.jsx)(ee,{})})}),Object(_.jsx)(p.a,{}),Object(_.jsx)(u.a.Row,{children:Object(_.jsx)(f.a,{raised:!0,children:Object(_.jsx)(de,{accountPair:S})})})]})]}),Object(_.jsx)(X,{})]})}function Ee(){return Object(_.jsx)(H,{children:Object(_.jsx)(ke,{})})}s.a.render(Object(_.jsx)(Ee,{}),document.getElementById("root"))}},[[647,1,2]]]);
//# sourceMappingURL=main.9e66afc2.chunk.js.map