(this["webpackJsonpsubstrate-front-end-template"]=this["webpackJsonpsubstrate-front-end-template"]||[]).push([[0],{466:function(e){e.exports=JSON.parse('{"APP_NAME":"dappCon","DEVELOPMENT_KEYRING":true,"RPC":{}}')},515:function(e){e.exports=JSON.parse('{"PROVIDER_SOCKET":"wss://shiden.api.onfinality.io/public-ws"}')},516:function(e){e.exports=JSON.parse('{"SmartContract":{"_enum":{"Evm":"H160","Wasm":"AccountId"}},"EraRewardAndStake":{"rewards":"Balance","staked":"Balance"},"EraIndex":"u32","StakingLedger":{"total":"Balance","active":"Balance"},"EraStakingPoints":{"total":"Balance","stakers":"BTreeMap<AccountId, Balance>","former_staked_era":"u32","claimed_rewards":"Balance"}}')},518:function(e,t){},526:function(e,t){},551:function(e,t){},553:function(e,t){},563:function(e,t){},565:function(e,t){},595:function(e,t){},597:function(e,t){},604:function(e,t){},605:function(e,t){},622:function(e,t){},640:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),c=a(139),s=a.n(c),i=a(1),o=a(676),u=a(668),l=a(684),j=a(679),b=a(669),p=a(670),d=a(667),O=a(476),f=a(686),x=(a(500),a(16)),h=a.n(x),v=a(23),S=a(27),y=a(467),m=a(193),g=a.n(m),k=a(680),E=a(671),C=a(223),R=a(306),w=a(466),N=a(515),T=a(516),I=["REACT_APP_PROVIDER_SOCKET","REACT_APP_DEVELOPMENT_KEYRING"].reduce((function(e,t){return void 0!==Object({NODE_ENV:"production",PUBLIC_URL:"/dappcon",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})[t]&&(e[t.slice(10)]=Object({NODE_ENV:"production",PUBLIC_URL:"/dappcon",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})[t]),e}),{}),P=Object(S.a)(Object(S.a)(Object(S.a)(Object(S.a)({},w),N),I),{},{types:T}),D=a(6),A=g.a.parse(window.location.search).rpc||P.PROVIDER_SOCKET;console.log("Connected socket: ".concat(A));var _={socket:A,jsonrpc:Object(S.a)(Object(S.a)({},y.a),P.RPC),types:P.types,keyring:null,keyringState:null,api:null,apiError:null,apiState:null},q=function(e,t){switch(t.type){case"CONNECT_INIT":return Object(S.a)(Object(S.a)({},e),{},{apiState:"CONNECT_INIT"});case"CONNECT":return Object(S.a)(Object(S.a)({},e),{},{api:t.payload,apiState:"CONNECTING"});case"CONNECT_SUCCESS":return Object(S.a)(Object(S.a)({},e),{},{apiState:"READY"});case"CONNECT_ERROR":return Object(S.a)(Object(S.a)({},e),{},{apiState:"ERROR",apiError:t.payload});case"LOAD_KEYRING":return Object(S.a)(Object(S.a)({},e),{},{keyringState:"LOADING"});case"SET_KEYRING":return Object(S.a)(Object(S.a)({},e),{},{keyring:t.payload,keyringState:"READY"});case"KEYRING_ERROR":return Object(S.a)(Object(S.a)({},e),{},{keyring:null,keyringState:"ERROR"});default:throw new Error("Unknown type: ".concat(t.type))}},U=!1,Y=r.a.createContext(),F=function(e){var t=Object(S.a)({},_);["socket","types"].forEach((function(a){t[a]="undefined"===typeof e[a]?t[a]:e[a]}));var a=Object(n.useReducer)(q,t),r=Object(i.a)(a,2),c=r[0],s=r[1];return function(e,t){var a=e.apiState,n=e.socket,r=e.jsonrpc,c=e.types;if(!a){t({type:"CONNECT_INIT"});var s=new k.a(n),i=new E.a({provider:s,types:c,rpc:r});i.on("connected",(function(){t({type:"CONNECT",payload:i}),i.isReady.then((function(e){return t({type:"CONNECT_SUCCESS"})}))})),i.on("ready",(function(){return t({type:"CONNECT_SUCCESS"})})),i.on("error",(function(e){return t({type:"CONNECT_ERROR",payload:e})}))}}(c,s),function(e,t){var a=function(){var e=Object(v.a)(h.a.mark((function e(){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"LOAD_KEYRING"}),e.prev=1,e.next=4,Object(C.b)(P.APP_NAME);case 4:return e.next=6,Object(C.a)();case 6:a=(a=e.sent).map((function(e){var t=e.address,a=e.meta;return{address:t,meta:Object(S.a)(Object(S.a)({},a),{},{name:"".concat(a.name," (").concat(a.source,")")})}})),R.a.loadAll({isDevelopment:P.DEVELOPMENT_KEYRING},a),t({type:"SET_KEYRING",payload:R.a}),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),console.error(e.t0),t({type:"KEYRING_ERROR"});case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}();if(!e.keyringState){if(U)return t({type:"SET_KEYRING",payload:R.a});U=!0,a()}}(c,s),Object(D.jsx)(Y.Provider,{value:c,children:e.children})},M=function(){return Object(S.a)({},Object(n.useContext)(Y))},K={paramConversion:{num:["Compact<Balance>","BalanceOf","u8","u16","u32","u64","u128","i8","i16","i32","i64","i128"]}},G=a(15),B=a(641);function L(e){var t=e.accountPair,a=void 0===t?null:t,r=e.label,c=e.setStatus,s=e.color,o=void 0===s?"blue":s,u=e.style,l=void 0===u?null:u,j=e.type,b=void 0===j?"QUERY":j,p=e.attrs,d=void 0===p?null:p,O=e.disabled,f=void 0!==O&&O,x=M().api,y=Object(n.useState)(null),m=Object(i.a)(y,2),g=m[0],k=m[1],E=Object(n.useState)(null),R=Object(i.a)(E,2),w=R[0],N=R[1],T=d.palletRpc,I=d.callable,P=d.inputParams,A=d.paramFields,_=function(){return"SUDO-TX"===b},q=function(){return"UNCHECKED-SUDO-TX"===b};Object(n.useEffect)((function(){Object(v.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x&&x.query.sudo){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,x.query.sudo.key();case 4:(t=e.sent).isEmpty?N(null):N(t.toString());case 6:case"end":return e.stop()}}),e)})))()}),[x]);var U,Y=function(){var e=Object(v.a)(h.a.mark((function e(){var t,n,r,c,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.address,n=a.meta,r=n.source,!n.isInjected){e.next=9;break}return e.next=4,Object(C.c)(r);case 4:s=e.sent,c=t,x.setSigner(s.signer),e.next=10;break;case 9:c=a;case 10:return e.abrupt("return",c);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(e){var t=e.status;return t.isFinalized?c("\ud83d\ude09 Finalized. Block hash: ".concat(t.asFinalized.toString())):c("Current transaction status: ".concat(t.type))},L=function(e){return c("\ud83d\ude1e Transaction Failed: ".concat(e.toString()))},H=function(){var e=Object(v.a)(h.a.mark((function e(){var t,a,n,r,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y();case 2:a=e.sent,n=ee(A,P),r=n?x.tx.sudo.sudo((t=x.tx[T])[I].apply(t,Object(G.a)(n))):x.tx.sudo.sudo(x.tx[T][I]()),c=r.signAndSend(a,F).catch(L),k((function(){return c}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=Object(v.a)(h.a.mark((function e(){var t,a,n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y();case 2:a=e.sent,n=x.tx.sudo.sudoUncheckedWeight((t=x.tx[T])[I].apply(t,Object(G.a)(P)),0),r=n.signAndSend(a,F).catch(L),k((function(){return r}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=Object(v.a)(h.a.mark((function e(){var t,a,n,r,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y();case 2:return a=e.sent,n=ee(A,P),r=n?(t=x.tx[T])[I].apply(t,Object(G.a)(n)):x.tx[T][I](),e.next=7,r.signAndSend(a,F).catch(L);case 7:c=e.sent,k((function(){return c}));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=Object(v.a)(h.a.mark((function e(){var t,a,n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=ee(A,P),n=a?(t=x.tx[T])[I].apply(t,Object(G.a)(a)):x.tx[T][I](),e.next=4,n.send(F).catch(L);case 4:r=e.sent,k((function(){return r}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=function(e){return e.isNone?c("None"):c(e.toString())},J=function(){var e=Object(v.a)(h.a.mark((function e(){var t,a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=ee(A,P),e.next=3,(t=x.query[T])[I].apply(t,Object(G.a)(a).concat([Q]));case 3:n=e.sent,k((function(){return n}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(v.a)(h.a.mark((function e(){var t,a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=ee(A,P,{emptyAsNull:!1}),e.next=3,(t=x.rpc[T])[I].apply(t,Object(G.a)(a).concat([Q]));case 3:n=e.sent,k((function(){return n}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=x.consts[T][I];e.isNone?c("None"):c(e.toString())},$=function(){var e=Object(v.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g&&(g(),k(null)),c("Sending..."),_()&&H()||q()&&V()||"SIGNED-TX"===b&&X()||"UNSIGNED-TX"===b&&W()||"QUERY"===b&&J()||"RPC"===b&&z()||"CONSTANT"===b&&Z();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ee=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{emptyAsNull:!0},n=t.map((function(e){return"object"===typeof e&&null!==e&&"string"===typeof e.value?e.value.trim():"string"===typeof e?e.trim():e})),r=e.map((function(e,t){return Object(S.a)(Object(S.a)({},e),{},{value:n[t]||null})}));return r.reduce((function(e,t){var n=t.type,r=void 0===n?"string":n,c=t.value;if(null==c||""===c)return a.emptyAsNull?[].concat(Object(G.a)(e),[null]):e;var s=c;return r.indexOf("Vec<")>=0?(s=(s=s.split(",").map((function(e){return e.trim()}))).map((function(e){return te(r)?e.indexOf(".")>=0?Number.parseFloat(e):Number.parseInt(e):e})),[].concat(Object(G.a)(e),[s])):(te(r)&&(s=s.indexOf(".")>=0?Number.parseFloat(s):Number.parseInt(s)),[].concat(Object(G.a)(e),[s]))}),[])},te=function(e){return K.paramConversion.num.some((function(t){return e.indexOf(t)>=0}))};return Object(D.jsx)(B.a,{basic:!0,color:o,style:l,type:"submit",onClick:$,disabled:f||!T||!I||!(0===A.length||A.every((function(e,t){var a=P[t];if(e.optional)return!0;if(null==a)return!1;var n="object"===typeof a?a.value:a;return null!==n&&""!==n})))||(_()||q())&&(U=a,!(w&&U&&U.address===w)),children:r})}function H(e){return Object(D.jsxs)(B.a.Group,{children:[Object(D.jsx)(L,Object(S.a)({label:"Unsigned",type:"UNSIGNED-TX",color:"grey"},e)),Object(D.jsx)(B.a.Or,{}),Object(D.jsx)(L,Object(S.a)({label:"Signed",type:"SIGNED-TX",color:"blue"},e)),Object(D.jsx)(B.a.Or,{}),Object(D.jsx)(L,Object(S.a)({label:"SUDO",type:"SUDO-TX",color:"red"},e))]})}function V(e){var t=M(),n=t.api,r=t.apiState,c=t.keyring,s=t.keyringState;return"READY"===r&&(window.api=n),"READY"===s&&(window.keyring=c),window.util=a(5),window.utilCrypto=a(45),null}var X=a(673),W=a(672),Q=a(674),J=a(685),z=a(150),Z={"0x95f506e72777efcb3c54878bb4160b00cd11cd84":"Astar Exchange","0xd59fc6bfd9732ab19b03664a45dc29b8421bda9a":"Astar Degens","0xa602d021da61ec4cc44dedbd4e3090a05c97a435":"Astar Network","0x48f292e9fdce07ba34217b0aa62e08b62376df3e":"OnFinality","0xe915d2393a08a00c5a463053edd31bae2199b9e7":"ArthSwap","0xc4335b1b76fa6d52877b3046eca68f6e708a27dd":"Starlay Finance","0x101b453a02f961b4e3f0526ecd4c533c3a80d795":"Community Rewards","0xcdb32eed99aa19d39e5d6ec45ba74dc4afec549f":"Orcus","0x1de7c3a07918fb4be9159703e73d6e0b0736cabc":"ADAO","0xaab44542c72f88f7b98fffda418e3efe94bc13af":"Astar Farm","0x9448610696659de8f72e1831d392214ae1ca4838":"Sirius Finance","0xa5efb5bf75bbb607dc243707a83f2af5ed4e9813":"TofuNFT","0x4633c1f0f633cc42fd0ba394762283606c88ae52":"Standard Protocol","0x2b9a7085afba278bec6bbffb399a3c042ed05046":"Webb","0xc8ef7176757f54b6aefa965958f8da4a1c5992e1":"Subscan","0xa1617cd6a7eaa6c408faac2030e0c27f2a7c17e7":"PolkaEx","0x4d4e6e07d480f3aae931c31430bc61ea7ef29052":"CryptoSpells","0xd9ca818d8db735fde245afaf55821ed7fa582d6c":"EmiSwap","0xe0f41a9626ade6c2bfaade6e497dc584bc3e9dc5":"Open Emoji Battler","0xf87c7872eff6f01de8efcb328471967b19e302a9":"Community Rewards Program","0x602332522f85c2fc29603f1e26ff4a0a9b390ff2":"Mochi Market"},$=1e18;function ee(e){var t=M().api,a=Object(n.useState)([]),r=Object(i.a)(a,2),c=r[0],s=r[1],o=Object(n.useState)(0),u=Object(i.a)(o,2),j=u[0],b=u[1],p=Object(n.useState)(0),d=Object(i.a)(p,2),O=d[0],f=d[1],x=Object(n.useState)(0),S=Object(i.a)(x,2),y=S[0],m=S[1],g=Object(n.useState)(0),k=Object(i.a)(g,2),E=k[0],C=k[1],R=Object(n.useState)(0),w=Object(i.a)(R,2),N=w[0],T=w[1],I=Object(n.useState)(0),P=Object(i.a)(I,2),A=P[0],_=P[1],q=Object(n.useState)(0),U=Object(i.a)(q,2),Y=U[0],F=U[1],K=Object(n.useState)(0),B=Object(i.a)(K,2),L=B[0],H=B[1],V=Object(n.useState)(0),Q=Object(i.a)(V,2),J=Q[0],z=Q[1],ee=Object(n.useState)(""),ae=Object(i.a)(ee,2),ne=ae[0],re=ae[1],ce=function(e){return{Evm:e}};return Object(n.useEffect)((function(){var e=function(){var e=Object(v.a)(h.a.mark((function e(){var a,n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.query.dappsStaking.registeredDapps.keys();case 3:a=e.sent,console.log("registeredDapps result",a),n=a.map((function(e){return"0x"+e.toString().slice(-40)})),r=n.map((function(e){return{key:e,value:e,text:e}})),console.log("fetchContracts",r),s(r),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0),console.log("fetchContracts registeredDapps.keys() failed");case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();e()}),[t.query.dappsStaking]),Object(n.useEffect)((function(){var e=function(){var e=Object(v.a)(h.a.mark((function e(){var a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.query.dappsStaking.registeredDapps(ce(j));case 3:a=e.sent,n=a.isNone?"none":a.unwrap().developer.toHuman(),console.log("contract=",j,"setDeveloper to",n),m(n),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0),console.log("querycontractEraStakeMap registeredDapps failed");case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();e()}),[t.query.dappsStaking,j]),Object(n.useEffect)((function(){var e=function(){var e=Object(v.a)(h.a.mark((function e(){var a,n,r,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new Map,n=new Map,e.prev=2,e.next=5,t.query.dappsStaking.contractEraStake.entries(ce(j));case 5:return e.sent.forEach((function(e){var t=Object(i.a)(e,2),n=t[0],r=t[1],c=parseInt(n.args.map((function(e){return e.toString()}))[1]);a.set(c,r.toJSON())})),e.next=9,t.query.dappsStaking.generalEraInfo.entries();case 9:e.sent.forEach((function(e){var t=Object(i.a)(e,2),a=t[0],r=t[1],c=parseInt(a.args.map((function(e){return e.toString()}))[0]);n.set(c,r.toJSON())})),r=0,a.forEach((function(e){!1===e.contractRewardClaimed&&r++})),console.log("unclaimed eras",r),F(r-1),0!==a.size&&(c=Math.min.apply(Math,Object(G.a)(a.keys())),H(c),console.log("firstStakedEra",c),t.query.dappsStaking.currentEra((function(e){var t=e.toNumber();console.log("currentEra",t);var r=a.get(t),s=parseInt(r.numberOfStakers);console.log("numberOfStakers",s),_(s);var i=parseInt(r.total/$);console.log("total",i),C(i);for(var o=0,u="",l=c;l<=e;l++){var b=a.get(l),p=n.get(l);if(b)if(b.contractRewardClaimed){var d=b.total/p.staked;o+=p.rewards.dapps*d}else u+=l.toString()+" ";else console.log(j+" missing contractStakeInfo for era",l)}console.log("claimedRewards",parseInt(o/$)),console.log("unclaimedEra",u),T(parseInt(o/$)),z(u)})).catch(console.error)),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(2),console.error(e.t0),console.log("querycontractEraStakeMap failed");case 22:case"end":return e.stop()}}),e,null,[[2,18]])})));return function(){return e.apply(this,arguments)}}();e()}),[t.query.dappsStaking,j]),Object(D.jsxs)(l.a.Column,{width:8,children:[Object(D.jsxs)("h1",{children:["Contract Explorer - ",ne]}),Object(D.jsxs)(X.a,{children:[Object(D.jsx)(X.a.Field,{children:Object(D.jsx)(W.a,{placeholder:"Contract",fluid:!0,label:"Contract",onChange:function(e,t){m(0),_("?"),C(0),T("?"),F(0),z(""),re(""),console.log("onContractChange value",t.value),b(t.value),f(t.value),re(Z[t.value])},search:!0,selection:!0,value:O,options:c})}),Object(D.jsx)(te,{developer:y,numStakers:A,firstTime:L,totalStaked:E,claimedRewards:N,contract:j,erasToClaim:Y,unclaimedEras:J})]})]})}function te(e){return Object(D.jsxs)("div",{style:{overflowWrap:"break-word"},children:[Object(D.jsx)("img",{alt:"robots",src:"https://robohash.org/".concat(e.contract)}),Object(D.jsxs)(Q.a,{children:[Object(D.jsxs)(Q.a.Header,{children:[Object(D.jsxs)(Q.a.Row,{children:[Object(D.jsx)(Q.a.HeaderCell,{children:"Contract Address"}),Object(D.jsx)(Q.a.HeaderCell,{children:e.contract})]}),Object(D.jsxs)(Q.a.Row,{children:[Object(D.jsx)(Q.a.HeaderCell,{children:"Developer's account:"}),Object(D.jsx)(Q.a.HeaderCell,{children:e.developer})]})]}),Object(D.jsxs)(Q.a.Body,{children:[Object(D.jsxs)(Q.a.Row,{children:[Object(D.jsx)(Q.a.Cell,{children:Object(D.jsx)(J.a,{as:"h2",children:Object(D.jsxs)(J.a.Content,{children:[e.firstTime,Object(D.jsx)(J.a.Subheader,{children:"First Era Staked"})]})})}),Object(D.jsx)(Q.a.Cell,{children:Object(D.jsx)(J.a,{as:"h2",children:Object(D.jsxs)(J.a.Content,{children:[Object(D.jsx)(z.a,{name:"user"}),e.numStakers,Object(D.jsx)(J.a.Subheader,{children:"Number of Stakers"})]})})})]}),Object(D.jsxs)(Q.a.Row,{children:[Object(D.jsx)(Q.a.Cell,{children:Object(D.jsx)(J.a,{as:"h2",children:Object(D.jsxs)(J.a.Content,{children:[e.totalStaked,Object(D.jsx)(J.a.Subheader,{children:"Total Staked"})]})})}),Object(D.jsx)(Q.a.Cell,{children:Object(D.jsx)(J.a,{as:"h2",children:Object(D.jsxs)(J.a.Content,{children:[e.claimedRewards,Object(D.jsx)(J.a.Subheader,{children:"Claimed Rewards"})]})})})]}),Object(D.jsxs)(Q.a.Row,{children:[Object(D.jsx)(Q.a.Cell,{children:Object(D.jsx)(J.a,{as:"h2",children:Object(D.jsxs)(J.a.Content,{children:[e.erasToClaim,Object(D.jsx)(J.a.Subheader,{children:"Number of unclaimed eras"})]})})}),Object(D.jsx)(Q.a.Cell,{children:Object(D.jsx)(J.a,{as:"h2",children:Object(D.jsxs)(J.a.Content,{children:[e.unclaimedEras,Object(D.jsx)(J.a.Subheader,{children:"Unclaimed Eras"})]})})})]})]})]})]})}function ae(e){return M().api?Object(D.jsx)(ee,Object(S.a)({},e)):null}var ne=a(675),re=a(682),ce=1e18;function se(e){var t=M().api,a=Object(n.useState)(0),r=Object(i.a)(a,2),c=r[0],s=r[1],o=Object(n.useState)(0),u=Object(i.a)(o,2),j=u[0],b=u[1],p=Object(n.useState)(0),d=Object(i.a)(p,2),O=d[0],f=d[1],x=Object(n.useState)(0),h=Object(i.a)(x,2),v=h[0],S=h[1];return Object(n.useEffect)((function(){return t.query.dappsStaking.currentEra((function(e){s(e.toNumber())})),t.query.dappsStaking.generalEraInfo(c,(function(e){if(e.isNone)b("<None>");else{var t=parseInt(e.unwrap().staked.valueOf()/ce/1e6);b(t)}})).catch(console.error),t.query.dappsStaking.blockRewardAccumulator((function(e){if(e.isNone)f("<None>");else{var t=(parseInt(e.stakers)+parseInt(e.dapps))/ce,a=parseInt(e.dapps)/ce;f(parseInt(t)),S(parseInt(a))}})).catch(console.error),function(){}}),[t.query.dappsStaking,c]),Object(D.jsx)(l.a.Column,{children:Object(D.jsxs)(ne.a,{children:[Object(D.jsx)(ne.a.Content,{textAlign:"center",children:Object(D.jsx)(re.a,{label:"TVL in dApps (mil)",value:j})}),Object(D.jsxs)(ne.a.Content,{extra:!0,children:["dapp rewards",Object(D.jsx)(z.a,{name:"hand point right outline"}),v," (",O,")"]})]})})}function ie(e){return M().api.query.dappsStaking?Object(D.jsx)(se,Object(S.a)({},e)):null}var oe=a(677);function ue(e){var t=M().api,a=Object(n.useState)(0),r=Object(i.a)(a,2),c=r[0],s=r[1],o=Object(n.useState)(0),u=Object(i.a)(o,2),j=u[0],b=u[1],p=Object(n.useState)(0),d=Object(i.a)(p,2),O=d[0],f=d[1],x=t.consts.dappsStaking.blockPerEra.toNumber(),h=t.query.dappsStaking.currentEra,v=t.derive.chain.bestNumber;return Object(n.useEffect)((function(){var e=null;return v((function(e){f(e%x/x*100),b(x-e%x)})).then((function(t){e=t})).catch(console.error),t.query.dappsStaking.currentEra((function(e){s(e.toNumber())})).catch(console.error),function(){return e&&e()}}),[h,v,x,t.query.dappsStaking]),Object(D.jsx)(l.a.Column,{children:Object(D.jsxs)(ne.a,{color:"purple",children:[Object(D.jsx)(ne.a.Content,{textAlign:"center",children:Object(D.jsx)(re.a,{label:"Current Era",value:c})}),Object(D.jsxs)(ne.a.Content,{extra:!0,children:["Blocks until new era :",Object(D.jsx)(z.a,{name:"time"})," ",j,Object(D.jsx)(oe.a,{percent:O,indicating:!0,success:!0})]})]})})}function le(e){return M().api.query.dappsStaking.currentEra?Object(D.jsx)(ue,Object(S.a)({},e)):null}var je=a(22),be=a(666),pe=a(222),de=function(e){return e.type.toString().startsWith("Option<")};function Oe(e){var t=M(),a=t.api,r=t.jsonrpc,c=e.accountPair,s=Object(n.useState)(null),o=Object(i.a)(s,2),u=o[0],j=o[1],b=Object(n.useState)("QUERY"),p=Object(i.a)(b,2),d=p[0],O=p[1],f=Object(n.useState)([{key:"dappsStaking",value:"dappsStaking",text:"dappsStaking"}]),x=Object(i.a)(f,1)[0],h=Object(n.useState)([]),v=Object(i.a)(h,2),y=v[0],m=v[1],g=Object(n.useState)([]),k=Object(i.a)(g,2),E=k[0],C=k[1],R={palletRpc:"",callable:"",inputParams:[]},w=Object(n.useState)(R),N=Object(i.a)(w,2),T=N[0],I=N[1],P=T.palletRpc,A=T.callable,_=T.inputParams;Object(n.useEffect)((function(){if(a&&""!==P){var e=Object.keys(function(e,t){return"QUERY"===t?e.query:"EXTRINSIC"===t?e.tx:"RPC"===t?e.rpc:e.consts}(a,d)[P]).sort().map((function(e){return{key:e,value:e,text:e}}));m(e)}}),[a,d,P]),Object(n.useEffect)((function(){if(a&&""!==P&&""!==A){var e=[];if("QUERY"===d){var t=a.query[P][A].meta.type;t.isPlain||(t.isMap?e=[{name:t.asMap.key.toString(),type:t.asMap.key.toString(),optional:!1}]:t.isDoubleMap&&(e=[{name:t.asDoubleMap.key1.toString(),type:t.asDoubleMap.key1.toString(),optional:!1},{name:t.asDoubleMap.key2.toString(),type:t.asDoubleMap.key2.toString(),optional:!1}]))}else if("EXTRINSIC"===d){var n=a.tx[P][A].meta.args;n&&n.length>0&&(e=n.map((function(e){return{name:e.name.toString(),type:e.type.toString(),optional:de(e)}})))}else if("RPC"===d){var c=[];r[P]&&r[P][A]&&(c=r[P][A].params),c.length>0&&(e=c.map((function(e){return{name:e.name,type:e.type,optional:e.isOptional||!1}})))}else"CONSTANT"===d&&(e=[]);C(e)}else C([])}),[a,d,P,A,r]);var q=function(e,t){I((function(e){var a,n=t.state,r=t.value;if("object"===typeof n){var c=n.ind,s=n.paramField.type,i=Object(G.a)(e.inputParams);i[c]={type:s,value:r},a=Object(S.a)(Object(S.a)({},e),{},{inputParams:i})}else if("palletRpc"===n){var o;a=Object(S.a)(Object(S.a)({},e),{},(o={},Object(je.a)(o,n,r),Object(je.a)(o,"callable",""),Object(je.a)(o,"inputParams",[]),o))}else if("callable"===n){var u;a=Object(S.a)(Object(S.a)({},e),{},(u={},Object(je.a)(u,n,r),Object(je.a)(u,"inputParams",[]),u))}return a}))},U=function(e,t){O(t.value),I(R)},Y=function(e){return"RPC"===e?"Optional Parameter":"Leaving this field as blank will submit a NONE value"};return Object(D.jsxs)(l.a.Column,{width:8,children:[Object(D.jsx)("h1",{children:"dApps-Staking Pallet Interactor"}),Object(D.jsxs)(X.a,{children:[Object(D.jsxs)(X.a.Group,{style:{overflowX:"auto"},inline:!0,children:[Object(D.jsx)("label",{children:"Interaction Type"}),Object(D.jsx)(X.a.Radio,{label:"Extrinsic",name:"interxType",value:"EXTRINSIC",checked:"EXTRINSIC"===d,onChange:U}),Object(D.jsx)(X.a.Radio,{label:"Query",name:"interxType",value:"QUERY",checked:"QUERY"===d,onChange:U}),Object(D.jsx)(X.a.Radio,{label:"RPC",name:"interxType",value:"RPC",checked:"RPC"===d,onChange:U}),Object(D.jsx)(X.a.Radio,{label:"Constant",name:"interxType",value:"CONSTANT",checked:"CONSTANT"===d,onChange:U})]}),Object(D.jsx)(X.a.Field,{children:Object(D.jsx)(W.a,{placeholder:"Pallets / RPC",fluid:!0,label:"Pallet / RPC",onChange:q,search:!0,selection:!0,state:"palletRpc",value:P,options:x})}),Object(D.jsx)(X.a.Field,{children:Object(D.jsx)(W.a,{placeholder:"Callables",fluid:!0,label:"Callable",onChange:q,search:!0,selection:!0,state:"callable",value:A,options:y})}),E.map((function(e,t){return Object(D.jsxs)(X.a.Field,{children:[Object(D.jsx)(be.a,{placeholder:e.type,fluid:!0,type:"text",label:e.name,state:{ind:t,paramField:e},value:_[t]?_[t].value:"",onChange:q}),e.optional?Object(D.jsx)(pe.a,{basic:!0,pointing:!0,color:"teal",content:Y(d)}):null]},"".concat(e.name,"-").concat(e.type))})),Object(D.jsx)(X.a.Field,{style:{textAlign:"center"},children:Object(D.jsx)(fe,{accountPair:c,setStatus:j,attrs:{interxType:d,palletRpc:P,callable:A,inputParams:_,paramFields:E}})}),Object(D.jsx)("div",{style:{overflowWrap:"break-word"},children:u})]})]})}function fe(e){var t=e.attrs.interxType;return"QUERY"===t?Object(D.jsx)(L,Object(S.a)({label:"Query",type:"QUERY",color:"blue"},e)):"EXTRINSIC"===t?Object(D.jsx)(H,Object(S.a)({},e)):"RPC"===t||"CONSTANT"===t?Object(D.jsx)(L,Object(S.a)({label:"Submit",type:t,color:"blue"},e)):void 0}function xe(e){return M().api.tx?Object(D.jsx)(Oe,Object(S.a)({},e)):null}function he(e){var t=M().api,a=Object(n.useState)(0),r=Object(i.a)(a,2),c=r[0],s=r[1],o=Object(n.useState)([]),u=Object(i.a)(o,2),j=u[0],b=u[1],p=Object(n.useState)(0),d=Object(i.a)(p,2),O=d[0],f=d[1],x=Object(n.useState)(0),S=Object(i.a)(x,2),y=S[0],m=S[1];return Object(n.useEffect)((function(){var e=function(){var e=Object(v.a)(h.a.mark((function e(){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.consts.dappsStaking.maxNumberOfStakersPerContract.toNumber();case 3:a=e.sent,m(O/(c*a)*100),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();e()}),[c,t.consts.dappsStaking.maxNumberOfStakersPerContract,O]),Object(n.useEffect)((function(){var e=function(){var e=Object(v.a)(h.a.mark((function e(){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.query.dappsStaking.registeredDapps.keys();case 3:a=e.sent,s(a.length),a=a.map((function(e){return"0x"+e.toString().slice(-40)})),b(a),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();e()}),[t.query.dappsStaking]),Object(n.useEffect)((function(){var e=function(){var e=Object(v.a)(h.a.mark((function e(){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.query.dappsStaking.currentEra();case 2:a=e.sent.toNumber(),j.forEach(function(){var e=Object(v.a)(h.a.mark((function e(n){var r,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=a;case 1:if(!(r>0)){e.next=19;break}return e.prev=2,e.next=5,t.query.dappsStaking.contractEraStake({Evm:n},r);case 5:if(null===(c=e.sent.toJSON())){e.next=10;break}if("break"!==function(){var e=parseInt(c.numberOfStakers);return f((function(t){return t+e})),"break"}()){e.next=10;break}return e.abrupt("break",19);case 10:e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),console.error(e.t0),console.log("DappsCount contractEraStake.entries failed");case 16:r-=1,e.next=1;break;case 19:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[t.query.dappsStaking,j]),Object(n.useEffect)((function(){console.log("Registering for events"),t.query.system.events((function(e){e.forEach(function(){var e=Object(v.a)(h.a.mark((function e(a){var n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("dappsStaking"!==(n=a.event).section||"NewContract"!==n.method){e.next=7;break}return e.next=4,t.query.dappsStaking.registeredDapps.keys();case 4:r=e.sent,console.log("dappsCount =",r.length),s(r.length);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}))}),[t.query.dappsStaking.registeredDapps,t.query.system]),Object(D.jsx)(l.a.Column,{children:Object(D.jsxs)(ne.a,{children:[Object(D.jsx)(ne.a.Content,{textAlign:"center",children:Object(D.jsx)(re.a,{label:"dApps Count",value:c})}),Object(D.jsxs)(ne.a.Content,{extra:!0,children:["Stakers Cnt and Capacity:",Object(D.jsx)(z.a,{name:"user"})," ",O,Object(D.jsx)(oe.a,{percent:y,indicating:!0,warning:!0})]})]})})}function ve(e){var t=M().api;return t.query.dappsStaking&&t.query.dappsStaking.registeredDapps?Object(D.jsx)(he,Object(S.a)({},e)):null}function Se(e){var t=M(),a=t.api,r=t.socket,c=Object(n.useState)({}),s=Object(i.a)(c,2),o=s[0],u=s[1];return Object(n.useEffect)((function(){var e=function(){var e=Object(v.a)(h.a.mark((function e(){var t,n,r,c,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([a.rpc.system.chain(),a.rpc.system.name(),a.rpc.system.version()]);case 3:t=e.sent,n=Object(i.a)(t,3),r=n[0],c=n[1],s=n[2],u({chain:r,nodeName:c,nodeVersion:s}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();e()}),[a.rpc.system]),Object(D.jsx)(l.a.Column,{children:Object(D.jsxs)(ne.a,{children:[Object(D.jsxs)(ne.a.Content,{children:[Object(D.jsx)(ne.a.Header,{children:o.nodeName}),Object(D.jsx)(ne.a.Meta,{children:Object(D.jsx)("span",{children:o.chain})}),Object(D.jsx)(ne.a.Description,{children:r})]}),Object(D.jsxs)(ne.a.Content,{extra:!0,children:[Object(D.jsx)(z.a,{name:"setting"}),"v",o.nodeVersion]})]})})}function ye(e){var t=M().api;return t.rpc&&t.rpc.system&&t.rpc.system.chain&&t.rpc.system.name&&t.rpc.system.version?Object(D.jsx)(Se,Object(S.a)({},e)):null}var me=a(678);function ge(e){var t=M().api,a=Object(n.useState)(0),r=Object(i.a)(a,2),c=r[0],s=r[1],o=Object(n.useState)(0),u=Object(i.a)(o,2),l=u[0],j=u[1],b=Object(n.useState)(0),p=Object(i.a)(b,2),d=p[0],O=p[1];return Object(n.useEffect)((function(){var e=t.consts.dappsStaking.blockPerEra.toNumber();s(e);var a=t.consts.dappsStaking.maxNumberOfStakersPerContract.toNumber();j(a);var n=t.consts.dappsStaking.minimumStakingAmount.valueOf();return O(parseInt(n/1e18)),function(){}}),[t.consts]),Object(D.jsxs)(me.a.Group,{children:[Object(D.jsxs)(me.a,{active:!0,children:[Object(D.jsx)(z.a,{name:"truck"}),Object(D.jsxs)(me.a.Content,{children:[Object(D.jsx)(me.a.Title,{children:c}),Object(D.jsx)(me.a.Description,{children:"Blocks per Era"})]})]}),Object(D.jsxs)(me.a,{active:!0,children:[Object(D.jsx)(z.a,{name:"user"}),Object(D.jsxs)(me.a.Content,{children:[Object(D.jsx)(me.a.Title,{children:l}),Object(D.jsx)(me.a.Description,{children:"Max Stakers per contract "})]})]}),Object(D.jsxs)(me.a,{active:!0,children:[Object(D.jsx)(z.a,{name:"money bill alternate"}),Object(D.jsxs)(me.a.Content,{children:[Object(D.jsx)(me.a.Title,{children:d}),Object(D.jsx)(me.a.Description,{children:"Minimum staking amount "})]})]})]})}function ke(e){return M().api.consts?Object(D.jsx)(ge,Object(S.a)({},e)):null}function Ee(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),r=a[0],c=a[1];Object(n.useEffect)((function(){var e=g.a.parseUrl(window.location.search);c(e.query.rpc||P.PROVIDER_SOCKET)}),[]);return Object(D.jsx)(d.a,{children:Object(D.jsx)(W.a,{search:!0,selection:!0,clearable:!0,placeholder:"Select the Network",options:[{key:"Astar",text:"Astar (mainnet)",value:"wss://astar.api.onfinality.io/public-ws"},{key:"Shiden",text:"Shiden (mainnet)",value:"wss://shiden.api.onfinality.io/public-ws"},{key:"Shibuya",text:"Shibuya (testnet)",value:"wss://rpc.shibuya.astar.network"},{key:"Local",text:"Local",value:"ws://127.0.0.1:9944"}],onChange:function(e,t){!function(e){c(e);var t=g.a.parseUrl(window.location.search);t.query.rpc=e,window.location=g.a.stringifyUrl(t)}(t.value)},value:r})})}function Ce(e){return Object(D.jsx)(Ee,Object(S.a)({},e))}function Re(){var e,t=Object(n.useState)(null),a=Object(i.a)(t,1)[0],r=M(),c=r.apiState,s=r.keyring,x=r.keyringState,h=r.apiError,v=a&&"READY"===x&&s.getPair(a),S=function(e){return Object(D.jsx)(o.a,{active:!0,children:Object(D.jsx)(u.a,{size:"small",children:e})})};if("ERROR"===c)return e=h,Object(D.jsxs)(l.a,{centered:!0,columns:2,padded:!0,children:[Object(D.jsx)(l.a.Column,{children:Object(D.jsx)(j.a,{negative:!0,compact:!0,floating:!0,header:"Error Connecting to Substrate",content:"".concat(JSON.stringify(e,null,4))})}),Object(D.jsx)(l.a.Column,{children:Object(D.jsx)(Ce,{})})]});if("READY"!==c)return S("Connecting to Substrate");if("READY"!==x)return S("Loading accounts (please review any extension's authorization)");var y=Object(n.createRef)();return console.log("DappCon v3.0.1"),Object(D.jsxs)("div",{ref:y,children:[Object(D.jsx)(b.a,{context:y,children:Object(D.jsx)(l.a,{centered:!0,columns:2})}),Object(D.jsx)(p.a,{}),Object(D.jsxs)(d.a,{children:[Object(D.jsx)("style",{children:"\n            html, body {\n              background-color: #252839 !important;\n            }\n            p {\n              align-content: center;\n              background-color: #495285;\n              color: #fff;\n              display: flex;\n              flex-direction: column;\n              justify-content: center;\n              min-height: 6em;\n            }\n            p > span {\n              opacity: 0.4;\n              text-align: center;\n            }\n          }\n          "}),Object(D.jsxs)(l.a,{stackable:!0,columns:"equal",children:[Object(D.jsx)(l.a.Row,{children:Object(D.jsx)(O.a,{src:"".concat("/dappcon","/assets/dappcon_logo.png"),size:"huge"})}),Object(D.jsx)(l.a.Row,{children:Object(D.jsx)(Ce,{})}),Object(D.jsxs)(l.a.Row,{stretched:!0,children:[Object(D.jsx)(le,{}),Object(D.jsx)(ve,{}),Object(D.jsx)(ie,{}),Object(D.jsx)(ye,{})]}),Object(D.jsx)(p.a,{}),Object(D.jsx)(l.a.Row,{children:Object(D.jsx)(ke,{})}),Object(D.jsx)(p.a,{}),Object(D.jsx)(l.a.Row,{children:Object(D.jsx)(f.a,{raised:!0,children:Object(D.jsx)(ae,{})})}),Object(D.jsx)(p.a,{}),Object(D.jsx)(l.a.Row,{children:Object(D.jsx)(f.a,{raised:!0,children:Object(D.jsx)(xe,{accountPair:v})})})]})]}),Object(D.jsx)(V,{})]})}function we(){return Object(D.jsx)(F,{children:Object(D.jsx)(Re,{})})}s.a.render(Object(D.jsx)(we,{}),document.getElementById("root"))}},[[640,1,2]]]);
//# sourceMappingURL=main.5d5b5498.chunk.js.map